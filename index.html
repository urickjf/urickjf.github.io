<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfólio - Bernardo Botafogo</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        /* Estilos personalizados */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* gray-900 */
            color: #d1d5db; /* gray-300 */
        }

        /* Efeito de brilho sutil nos títulos */
        .text-glow {
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
        }
        
        /* Estilo para links de navegação ativos */
        .nav-link.active {
            color: #ffffff;
            font-weight: 700;
        }

        /* Mantém a proporção quadrada das miniaturas */
        .aspect-square {
            aspect-ratio: 1 / 1;
        }
        
        /* Animações do Modal */
        #modal-container.hidden { display: none; }
        .modal-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        .modal-fade-out { animation: fadeOut 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

        /* Estilo da barra de rolagem */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #6366f1; }
        
        /* Esconde as views de conteúdo por padrão */
        .content-view {
            display: none;
        }
        .content-view.active {
            display: block;
        }
    </style>
</head>
<body class="antialiased">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar / Header -->
        <aside class="w-full md:w-64 md:min-h-screen md:fixed md:flex flex-col p-6 bg-gray-900 border-b md:border-b-0 md:border-r border-gray-700 z-10">
            <div id="sidebar-header" class="flex-grow">
                <!-- Nome será inserido aqui -->
            </div>
            <nav id="main-nav" class="flex-grow my-8 md:my-0">
                
                <ul>
                    <li><a href="#" data-target="projects" class="nav-link text-lg text-gray-400 hover:text-white transition-colors duration-200">Projetos</a></li>
                    <li><a href="#" data-target="bio" class="nav-link text-lg text-gray-400 hover:text-white transition-colors duration-200">Bio</a></li>
                    <li><a href="#" data-target="curriculum" class="nav-link text-lg text-gray-400 hover:text-white transition-colors duration-200">Currículo</a></li>
                </ul>
            </nav>
            <footer class="text-sm text-gray-500">
                
            </footer>
        </aside>

        <!-- Área de Conteúdo Principal -->
        <main class="w-full md:ml-64 p-4 sm:p-6 md:p-8">
            <!-- Mensagem de Erro -->
            <div id="error-message" class="hidden bg-red-800 border border-red-600 text-white px-4 py-3 rounded-lg relative mb-6" role="alert">
                <strong class="font-bold">Erro:</strong>
                <span class="block sm:inline">Não foi possível carregar os dados do portfólio. Verifique o arquivo `data.json`.</span>
            </div>

            <!-- Views de Conteúdo -->
            <div id="bio-view" class="content-view"></div>
            <div id="projects-view" class="content-view"></div>
            <div id="curriculum-view" class="content-view"></div>
        </main>
    </div>

    <!-- Modal para Visualização de Projetos -->
    <div id="modal-container" class="hidden fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div id="modal-content" class="bg-gray-900 border border-gray-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col relative">
            <!-- Conteúdo do modal será injetado aqui -->
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const app = {
                // Elementos do DOM
                elements: {
                    sidebarHeader: document.getElementById('sidebar-header'),
                    mainNav: document.getElementById('main-nav'),
                    errorMessage: document.getElementById('error-message'),
                    modalContainer: document.getElementById('modal-container'),
                    modalContent: document.getElementById('modal-content'),
                    bioView: document.getElementById('bio-view'),
                    projectsView: document.getElementById('projects-view'),
                    curriculumView: document.getElementById('curriculum-view'),
                },
                // Dados do JSON
                data: {},
                // Estado do App
                state: {
                    currentView: 'projects', // Visão inicial
                    slider: {
                        currentIndex: 0,
                        media: []
                    }
                },

                // Função de inicialização
                init() {
                    this.loadData();
                    this.setupEventListeners();
                },

                // Carrega dados do data.json
                async loadData() {
                    try {
                        const response = await fetch('data.json');
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        this.data = await response.json();
                        this.renderAll();
                        this.switchView(this.state.currentView);
                    } catch (error) {
                        console.error("Erro ao carregar data.json:", error);
                        this.elements.errorMessage.classList.remove('hidden');
                    }
                },
                
                // Renderiza todos os componentes
                renderAll() {
                    this.renderSidebar();
                    this.renderBioView();
                    this.renderProjectsView();
                    this.renderCurriculumView();
                    feather.replace();
                },

                // Renderiza o cabeçalho da Sidebar
                renderSidebar() {
                    if (!this.data.profile) return;
                    this.elements.sidebarHeader.innerHTML = `<h1 class="text-3xl font-bold text-white leading-tight">${this.data.profile.name}</h1>`;
                },

                // Renderiza a view "Bio" (Perfil + Serviços)
                renderBioView() {
                    if (!this.data.profile || !this.data.services) return;
                    const { name, jobTitle, photoUrl, bio, contacts } = this.data.profile;

                    this.elements.bioView.innerHTML = `
                        <!-- Seção Perfil -->
                        <section class="flex flex-col md:flex-row items-center gap-6 md:gap-10 mb-12 md:mb-16">
                             <img src="${photoUrl}" alt="Foto de ${name}" class="w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-indigo-600 shadow-lg">
                            <div class="text-center md:text-left">
                                <h2 class="text-4xl md:text-5xl font-extrabold text-white text-glow">${name}</h2>
                                <h3 class="text-xl md:text-2xl font-medium text-indigo-400 mt-1">${jobTitle}</h3>
                                <p class="mt-4 max-w-2xl text-gray-400">${bio}</p>
                                <div class="flex items-center justify-center md:justify-start gap-4 mt-6">
                                    <a href="mailto:${contacts.email}" class="flex items-center gap-2 bg-gray-800 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">
                                        <i data-feather="mail" class="w-5 h-5"></i> E-mail
                                    </a>
                                    <a href="https://wa.me/${contacts.whatsapp}" target="_blank" class="flex items-center gap-2 bg-gray-800 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">
                                        <i data-feather="message-circle" class="w-5 h-5"></i> WhatsApp
                                    </a>
                                </div>
                            </div>
                        </section>
                        <!-- Seção Serviços -->
                        <section>
                             <h3 class="text-3xl font-bold text-white text-center mb-8 text-glow">Serviços</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6">
                                ${this.data.services.map(service => `
                                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-700 hover:border-indigo-500 transition-colors duration-300">
                                        <i data-feather="${service.icon}" class="w-10 h-10 text-indigo-400 mb-4"></i>
                                        <h4 class="text-xl font-bold text-white">${service.title}</h4>
                                        <p class="text-gray-400 mt-2">${service.description}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    `;
                },

                // Renderiza a view de Projetos
                renderProjectsView() {
                    if (!this.data.projects) return;
                    this.elements.projectsView.innerHTML = `
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4">
                            ${this.data.projects.map((project, index) => `
                                <div class="group relative rounded-md overflow-hidden cursor-pointer" onclick="app.showModal(${index})">
                                    <img src="${project.thumbnail}" alt="${project.title}" class="aspect-square w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                                    <div class="absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                        <h4 class="text-white text-lg font-bold text-center p-4">${project.title}</h4>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                },

                // Renderiza a view de Currículo
                renderCurriculumView() {
                    if (!this.data.curriculum) return;
                    const { summary, contact, experience, education, skills, tools, courses, hobbies } = this.data.curriculum;
                    const renderSection = (title, content) => {
                        if(!content || (Array.isArray(content) && content.length === 0)) return '';
                        return `<div class="mb-8"><h3 class="text-2xl font-bold text-indigo-400 border-b-2 border-indigo-500 pb-2 mb-4">${title}</h3>${content}</div>`;
                    };
                    const experienceContent = experience.map(exp => `<div class="mb-4"><h4 class="text-xl font-semibold text-white">${exp.role}</h4><p class="text-md text-gray-400">${exp.company} | ${exp.period}</p><p class="text-gray-400 mt-2">${exp.description}</p></div>`).join('');
                    const educationContent = education.map(edu => `<div class="mb-4"><h4 class="text-xl font-semibold text-white">${edu.course}</h4><p class="text-md text-gray-400">${edu.institution} | ${edu.period}</p></div>`).join('');
                    const coursesContent = courses.map(course => `<p class="text-gray-300 mb-2"><span class="font-semibold text-white">${course.name}</span> - ${course.institution}</p>`).join('');
                    const listContent = (items) => `<div class="flex flex-wrap gap-2">${items.map(item => `<span class="bg-gray-700 text-indigo-300 text-sm font-medium px-3 py-1 rounded-full">${item}</span>`).join('')}</div>`;

                    this.elements.curriculumView.innerHTML = `
                        <div class="bg-gray-800 p-6 sm:p-8 rounded-lg border border-gray-700">
                             <h2 class="text-4xl font-extrabold text-white text-glow mb-8">Currículo</h2>
                            ${renderSection('Resumo', `<p class="text-gray-300">${summary}</p>`)}
                            ${renderSection('Contato', `<p class="text-gray-300"><strong>Email:</strong> ${contact.email} | <strong>Telefone:</strong> ${contact.phone} | <strong>Website:</strong> ${contact.website}</p>`)}
                            ${renderSection('Experiência Profissional', experienceContent)}
                            ${renderSection('Formação Académica', educationContent)}
                            ${renderSection('Habilidades', listContent(skills))}
                            ${renderSection('Ferramentas', listContent(tools))}
                            ${renderSection('Cursos e Certificações', coursesContent)}
                            ${renderSection('Hobbies e Interesses', `<p class="text-gray-300">${hobbies.join(', ')}</p>`)}
                        </div>`;
                },
                
                // Lógica de navegação entre views
                switchView(targetId) {
                    this.state.currentView = targetId;
                    
                    // Esconde todas as views
                    document.querySelectorAll('.content-view').forEach(view => view.classList.remove('active'));
                    
                    // Mostra a view alvo
                    const targetView = document.getElementById(`${targetId}-view`);
                    if (targetView) targetView.classList.add('active');

                    // Atualiza o estado ativo dos links
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.classList.remove('active');
                        if (link.dataset.target === targetId) {
                            link.classList.add('active');
                        }
                    });
                    window.scrollTo(0, 0);
                },

                // Mostra o modal do projeto
                showModal(index) {
                    const project = this.data.projects[index];
                    this.state.slider.media = project.media;
                    this.state.slider.currentIndex = 0;

                    this.elements.modalContainer.classList.remove('hidden');
                    this.elements.modalContainer.classList.remove('modal-fade-out');
                    this.elements.modalContainer.classList.add('modal-fade-in');
                    document.body.style.overflow = 'hidden';
                    
                    this.renderModalContent();
                },
                
                // Renderiza o conteúdo interno do modal
                renderModalContent() {
                    const project = this.data.projects.find(p => p.media === this.state.slider.media);
                    if(!project) return;
                    
                    this.elements.modalContent.innerHTML = `
                        <button onclick="app.closeModal()" class="absolute top-3 right-3 text-gray-400 hover:text-white z-20">
                            <i data-feather="x" class="w-8 h-8"></i>
                        </button>
                        <div class="p-6 md:p-8 flex-grow overflow-y-auto">
                            <h3 class="text-3xl font-bold text-white mb-4 text-glow">${project.title}</h3>
                            <p class="text-gray-400 mb-6">${project.description}</p>
                        </div>
                        <div id="media-display" class="relative w-full bg-black flex-shrink-0"></div>
                    `;
                    this.updateSlider();
                },
                
                // Fecha o modal
                closeModal() {
                    this.elements.modalContainer.classList.add('modal-fade-out');
                    this.elements.modalContainer.classList.remove('modal-fade-in');
                    setTimeout(() => {
                        this.elements.modalContainer.classList.add('hidden');
                        document.body.style.overflow = 'auto';
                        this.elements.modalContent.innerHTML = '';
                    }, 300);
                },
                
                // Atualiza o slider de mídia no modal
                updateSlider() {
                    const mediaDisplay = document.getElementById('media-display');
                    if (!mediaDisplay) return;

                    const currentMedia = this.state.slider.media[this.state.slider.currentIndex];
                    let mediaHTML = '';
                    if (currentMedia.type === 'video') {
                        mediaHTML = `<div class="aspect-[16/9]"><iframe class="w-full h-full" src="${currentMedia.url}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe></div>`;
                    } else {
                        mediaHTML = `<div class="aspect-[16/9]"><img src="${currentMedia.url}" class="w-full h-full object-contain"></div>`;
                    }
                    if (this.state.slider.media.length > 1) {
                        mediaHTML += `
                            <button onclick="app.navigateSlider(-1)" class="absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors"><i data-feather="chevron-left"></i></button>
                            <button onclick="app.navigateSlider(1)" class="absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors"><i data-feather="chevron-right"></i></button>`;
                    }
                    mediaDisplay.innerHTML = mediaHTML;

                    if (this.state.slider.media.length > 1) {
                        const thumbnailsHTML = this.state.slider.media.map((media, index) => {
                            const borderClass = index === this.state.slider.currentIndex ? 'border-indigo-500' : 'border-transparent';
                            const icon = media.type === 'video' ? `<i data-feather="youtube" class="w-6 h-6 text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></i>` : '';
                            const thumbnailSrc = media.type === 'video' ? `https://img.youtube.com/vi/${media.url.split('/').pop().split('?')[0]}/mqdefault.jpg` : media.url;
                            return `<div class="relative cursor-pointer w-24 h-14 flex-shrink-0" onclick="app.jumpToSlide(${index})"><img src="${thumbnailSrc}" class="w-full h-full object-cover rounded border-2 ${borderClass}">${icon}</div>`;
                        }).join('');
                        mediaDisplay.insertAdjacentHTML('afterend', `<div class="flex-shrink-0 bg-gray-900 p-2 overflow-x-auto"><div class="flex gap-2">${thumbnailsHTML}</div></div>`);
                    }
                    feather.replace();
                },

                navigateSlider(direction) {
                    const newIndex = this.state.slider.currentIndex + direction;
                    const total = this.state.slider.media.length;
                    if(newIndex < 0) this.state.slider.currentIndex = total - 1;
                    else if (newIndex >= total) this.state.slider.currentIndex = 0;
                    else this.state.slider.currentIndex = newIndex;
                    this.renderModalContent();
                },

                jumpToSlide(index) {
                    this.state.slider.currentIndex = index;
                    this.renderModalContent();
                },

                // Configura os event listeners
                setupEventListeners() {
                    // Navegação
                    this.elements.mainNav.addEventListener('click', (e) => {
                        if (e.target.tagName === 'A' && e.target.dataset.target) {
                            e.preventDefault();
                            this.switchView(e.target.dataset.target);
                        }
                    });
                    // Modal
                    window.addEventListener('keydown', (e) => {
                        if (e.key === 'Escape' && !this.elements.modalContainer.classList.contains('hidden')) {
                            this.closeModal();
                        }
                    });
                    this.elements.modalContainer.addEventListener('click', (e) => {
                        if (e.target === this.elements.modalContainer) this.closeModal();
                    });
                }
            };
            window.app = app;
            app.init();
        });
    </script>
</body>
</html>


